<!DOCTYPE html>
<html id="html-style" style="color: black; background-color: white; font-family: Arial; filter: invert(0%);"><head>
        <title>Integral Interpreter</title>
        <style type="text/css" color="white" margin-top="1px">
            pre{
                font-family: consolas;
            }
            textarea{
                font-family: consolas;
            }
            input{
                font-family: consolas;
            }
            .dropdown {
                display: inline-block;
                border-bottom: 1px dotted black;
            }
            .dropdown-content {
                 display: none;
                 position: absolute;
                 background-color: white;
                 color:black;
                 border:1px solid;
                 padding: 3px 16px;
            }
            .dropdown:hover .dropdown-content {
                display: block;
                border-radius: 6px;
            }
	</style>
        <script type="text/javascript" src="integral.js"></script>
    </head>
    <body>
        <div class="dropdown">
            <b><a href="https://github.com/nph278/integral" target="_blank">Integral</a> interpreter </b>
            <div class="dropdown-content">
		Integral is a stacked-based programming language that I came up with. It uses code page 437. <br>

                I am PPCG user <a href="https://codegolf.stackexchange.com/users/95627/nph" target="_blank">
		                   nph
		               </a>
            </div>
        </div>

        <i><a href="table.html" target="_blank">(Instruction table)</a></i>

        <button style="border:1px solid;
		       background-color:#fff" onclick="outelm.value = runlang(codelm.value, inelm.value)">
             Run (<span id="byteselm">0</span> bytes)
        </button>

        <button onclick="outelm.value = 'https://a-ee.github.io/integral/?code=' +
			                escape(codelm.value)                     +
			                '&amp;input='                            +
			                escape(inelm.value)" style="border:1px solid; background-color:#fff">
             Permalink
        </button>

        <button onclick="postTemplate()" style="border:1px solid; background-color:#fff">
             SE post template
        </button>

        <button onclick="switchColor()" style="border:1px solid; background-color:#fff">
             <span id="light_or_dark">Dark</span> mode
        </button><br>

        <textarea title="code" id="codelm" placeholder="Enter your code" style="margin: 0px;
                         width: 1045px;
                         height: 109px;">        </textarea><br>

        <textarea id="inelm" placeholder="Enter inputs, newline separated" style="margin: 0px;
                         height: 131px;
                         width: 512px;">        </textarea>

        <textarea id="outelm" placeholder="output appears here" readonly="" margin:0="" style="margin: 0px;
                         border:#fff;
                         width: 515px;
                         height: 130px;">        </textarea><br>

        <div style="align:left">
            <input placeholder="encode integers here" type="number" id="numelm">

            <input placeholder="output here" type="text" id="numoutelm" style="border:#fff" readonly=""><br>
        </div>

        <div style="align:right">
            <input placeholder="encode string here" type="text" id="strelm">

            <input style="border:#fff" placeholder="output here" type="text" id="stroutelm" readonly="">
        </div><br>

        <script type="text/javascript">
            function qstr(qs) {
                var s = location.href.replace("?","?&").split("&");
                for(i = 1; i < s.length; i++)
                    if(s[i].split("=")[0] == qs)
                        return s[i].split("=")[1];
                return "";
            }

            var codelm  = document.getElementById("codelm");
            var byteslm = document.getElementById("byteselm");
            var x       = unescape(qstr("code"));

            document.getElementById("codelm").value = x;

            x = unescape(qstr("input"));
            document.getElementById("inelm").value  = x;

            function postTemplate(){
                var header = "# [Integral](https://github.com/nph278/integral), " +
                             byteselm.innerHTML                                   +
                             " Bytes\n\n";
                var body   = codelm.value;

                outelm.value = header                                                 +
                               '<pre>\n'                                              +
                               body                                                   +
                               '\n</pre>'                                             +
                               '\n\n[Try it!](https://a-ee.github.io/integral/?code=' +
                               escape(codelm.value)                                   +
                               '&amp;input='                                          +
                               escape(inelm.value)+")\n\n";
            }

            function switchColor() {
                var x = document.getElementById("html-style").style;
                x.setProperty('filter', 'invert(' + ((x.filter == "invert(100%)") ? "0%" : "100%") + ")");
            }
       </script>

       <script type="text/javascript">
           setInterval(function() {
               byteselm.innerHTML = codelm.value.length;
               numoutelm.value    = ';' + encode(Number(numelm.value)) + ';';
               stroutelm.value    = 'รท' + encodestr(strelm.value) + 'รท';
               light_or_dark.innerHTML = document.getElementById("html-style").style.filter == 'invert(100%)' ? 'Dark' : 'Light';
           }, 1);
       </script>

</body></html>
